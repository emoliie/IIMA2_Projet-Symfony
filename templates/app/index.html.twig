{% extends 'base.html.twig' %}

{% block title %}Hello AppController!{% endblock %}

{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 800px;
			width: 95%;
			font: 18px / 1.5 sans-serif;
		}
		.example-wrapper code {
			background: #F5F5F5;
			padding: 2px 6px;
		}
	</style>

	<div class="example-wrapper">

		{# Vérifie si l'utilisateur a le rôle ROLE_ADMIN ou ROLE_SUPER_ADMIN
		{% if is_granted('ROLE_ADMIN') or is_granted('ROLE_SUPER_ADMIN') %}
			<div>
				<h2>Ajouter un produit</h2>
				{{ form(add_product) }}
			</div>
		{% endif %} #}

		<div>
			{% for product in products %}
				<a href="{{ path('product_show', {id: product.id}) }}">
					<h2>{{ product.name }}</h2>
					{% if product.image is not empty %}
						<img src="{{ asset('uploads/' ~ product.image) }}" style="max-width:100px;">
					{% endif %}
					<p>{{ product.description }}</p>
					<p>{{ product.price }} €</p>
				</a>
			{% endfor %}
		</div>
	</div>
{% endblock %}
